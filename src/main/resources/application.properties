spring.application.name=hermez

# Server Configuration
server.port=8080

# R2DBC PostgreSQL Configuration
spring.r2dbc.url=${R2DBC_URL}
spring.r2dbc.username=${DB_USERNAME}
spring.r2dbc.password=${DB_PASSWORD}

# R2DBC Connection Pool Configuration
spring.r2dbc.pool.enabled=true
spring.r2dbc.pool.initial-size=5
spring.r2dbc.pool.max-size=20
spring.r2dbc.pool.max-idle-time=2m
spring.r2dbc.pool.max-acquire-time=15s
spring.r2dbc.pool.max-create-connection-time=10s
spring.r2dbc.pool.max-life-time=60m
spring.r2dbc.pool.validation-query=SELECT 1

# Flyway Configuration
spring.flyway.url=${FLYWAY_URL}
spring.flyway.user=${DB_USERNAME}
spring.flyway.password=${DB_PASSWORD}
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# Redis Configuration
spring.data.redis.host=${REDIS_HOST}
spring.data.redis.port=${REDIS_PORT}
spring.data.redis.password=${REDIS_PASSWORD}
spring.data.redis.timeout=3000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=2
spring.data.redis.lettuce.pool.max-wait=-1ms

# Mail Configuration
resend.api-key=${RESEND_API_KEY}
resend.from-email=${RESEND_FROM_EMAIL}
resend.enabled=${RESEND_ENABLED}

# CORS Configuration
server.forward-headers-strategy=framework
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:*}

# Logging Configuration
logging.level.dev.slethware.hermez=DEBUG
logging.level.org.springframework.r2dbc=DEBUG
logging.level.io.r2dbc.postgresql=DEBUG

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always

# OpenAPI/Swagger Configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/docs
springdoc.swagger-ui.operationsSorter=method
springdoc.api-docs.version=openapi_3_0
springdoc.swagger-ui.enabled=true

# Hermez Configuration (Override here only for environment-specific values)
hermez.server.id=${SERVER_ID}
hermez.server.address=${SERVER_ADDRESS}
hermez.subdomain.base-domain=${BASE_DOMAIN}
hermez.inspection.max-body-size-bytes=65536

# Auth Configuration
auth.jwt.secret=${JWT_SECRET}
auth.jwt.access-token-expiration=86400000
auth.jwt.refresh-token-expiration=2592000000
auth.verification-token-expiration=86400
auth.rate-limit.max-attempts=5
auth.rate-limit.window-seconds=60
auth.rate-limit.lockout-seconds=120

# OAuth Base URL
oauth.base-url=${OAUTH_BASE_URL:http://localhost:8080}

# OAuth Configuration - Google
oauth.google.client-id=${GOOGLE_CLIENT_ID}
oauth.google.client-secret=${GOOGLE_CLIENT_SECRET}
oauth.google.redirect-uri=${oauth.base-url}/api/v1/auth/oauth/google/callback

# OAuth Configuration - GitHub
oauth.github.client-id=${GITHUB_CLIENT_ID}
oauth.github.client-secret=${GITHUB_CLIENT_SECRET}
oauth.github.redirect-uri=${oauth.base-url}/api/v1/auth/oauth/github/callback